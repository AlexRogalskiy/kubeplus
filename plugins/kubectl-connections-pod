#!/bin/bash

if (( $# < 1 )); then
    echo "kubectl connections pod <Pod name> [<Namespace>]"
    exit 0
fi

pod=$1
namespace="default"
if [ $# = 2 ]; then
   namespace=$2 # If namespace is passed; use that
fi

if [[ "$OSTYPE" == "darwin"* ]]; then
	/$KUBEPLUS_HOME/plugins/kubediscovery-macos connections Pod $pod $namespace -o flat
elif [[ "$OSTYPE" == "linux-gnu"* ]]; then
	/$KUBEPLUS_HOME/plugins/kubediscovery-linux connections Pod $pod $namespace -o flat
else
	echo "$OSTYPE not supported."
fi
